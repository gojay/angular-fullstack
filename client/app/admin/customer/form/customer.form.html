<div class="row">
  <div class="col-md-12">
    <form class="form-horizontal row-border" name="userForm" ng-submit="vm.save(userForm)" accessible-form novalidate>
      <!-- <fieldset>
        <legend>Account</h3>
        <div class="form-group" ng-class="vm.getFormClass(userForm.name)">
          <label class="col-md-3 control-label">Name</label>
          <div class="col-md-9">
            <input type="text" name="name" class="form-control" autocomplete="off" ng-model="vm.model._user.name" required>
          </div>
          <div class="col-md-9 col-md-push-3" 
            ng-if="vm.isInteracted(userForm.name)" 
            ng-messages="userForm.name.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.email)">
          <label class="col-md-3 control-label">Email</label>
          <div class="col-md-9">
            <input type="email" name="email" class="form-control" autocomplete="off" 
              ng-model="vm.model._user.email" 
              ng-model-options="{ updateOn:'blur' }" 
              record-availability-validator="/api/users/validator"
              required>
          </div>
          <div class="col-md-9 col-md-push-3" 
            ng-if="vm.isInteracted(userForm.email)" 
            ng-messages="userForm.email.$error">
              <div ng-messages-include="app/layout/_ng-messages.html"></div>
              <p class="help-block" ng-message="recordAvailabilityValidator">This email already taken</p>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.oldpassword)" ng-if="vm.model._id || app.isRoot()">
          <label class="col-md-3 control-label">Old Password</label>
          <div class="col-md-9">
            <input type="password" name="oldpassword" class="form-control" ng-model="vm.model._user.oldpassword" ng-required="vm.model._id ? true : false">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.oldpassword)" ng-messages="userForm.oldpassword.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.password)" ng-if="!vm.model._id || app.isRoot()">
          <label class="col-md-3 control-label">Password</label>
          <div class="col-md-9">
            <input type="password" name="password" class="form-control" ng-model="vm.model._user.password" ng-required="vm.model._id ? false : true">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.password)" ng-messages="userForm.password.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.confirmPassword)" ng-if="!vm.model._id || app.isRoot()">
          <label class="col-md-3 control-label">Re Password</label>
          <div class="col-md-9">
              <input type="password" name="confirmPassword" class="form-control" 
                ng-model="vm.model._user.confirmPassword" 
                compare-to="vm.model._user.password">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.confirmPassword)" ng-messages="userForm.confirmPassword.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
            <p class="help-block" ng-message="compareTo">Password not match</p>
          </div>
        </div>
      </fieldset> -->
      <!-- <fieldset> -->
        <!-- <legend>Customer Information</h3> -->
        <div class="form-group" ng-class="vm.getFormClass(userForm.name)">
          <label class="col-md-3 control-label">Name</label>
          <div class="col-md-9">
            <input type="text" name="name" class="form-control" autocomplete="off" ng-model="vm.model.name" required>
          </div>
          <div class="col-md-9 col-md-push-3" 
            ng-if="vm.isInteracted(userForm.name)" 
            ng-messages="userForm.name.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div><!-- name -->
        <div class="form-group" ng-class="vm.getFormClass(userForm.email)">
          <label class="col-md-3 control-label">Email</label>
          <div class="col-md-9">
            <input type="email" name="email" class="form-control" autocomplete="off" 
              ng-model="vm.model.email" 
              ng-model-options="{ updateOn:'blur' }" 
              record-availability-validator="/api/customers/validator"
              required>
          </div>
          <div class="col-md-9 col-md-push-3" 
            ng-if="vm.isInteracted(userForm.email)" 
            ng-messages="userForm.email.$error">
              <div ng-messages-include="app/layout/_ng-messages.html"></div>
              <p class="help-block" ng-message="recordAvailabilityValidator">This email already taken</p>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.phone)">
          <label class="col-md-3 control-label">Phone</label>
          <div class="col-md-9">
              <input type="text" name="phone" class="form-control" 
                ng-model="vm.model.phone"
                ng-required="vm.options.form.customer.add">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.phone)" ng-messages="userForm.phone.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.address)">
          <label class="col-md-3 control-label">Address</label>
          <div class="col-md-9">
              <textarea name="address" class="form-control" 
                ng-model="vm.model.address"
                ng-required="vm.options.form.customer.add"></textarea>
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.address)" ng-messages="userForm.address.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.city)">
          <label class="col-md-3 control-label">City</label>
          <div class="col-md-9">
              <input type="text" name="city" class="form-control" 
                ng-model="vm.model.city"
                ng-required="vm.options.form.customer.add">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.city)" ng-messages="userForm.city.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
        <div class="form-group" ng-class="vm.getFormClass(userForm.postal_code)">
          <label class="col-md-3 control-label">Postal Code</label>
          <div class="col-md-9">
              <input type="text" name="postal_code" class="form-control" 
                ng-model="vm.model.postal_code"
                ng-pattern="/\d+$/">
          </div>
          <div class="col-md-9 col-md-push-3" ng-if="vm.isInteracted(userForm.postal_code)" ng-messages="userForm.postal_code.$error">
            <div ng-messages-include="app/layout/_ng-messages.html"></div>
          </div>
        </div>
      <!-- </fieldset> -->
      <div class="form-group">
        <div class="col-md-offset-3 col-md-9">
          <button type="submit" class="btn btn-primary btn-lg" ng-disabled="vm.loading || userForm.$pristine">
              <span ng-if="vm.loading">
                <i class="fa fa-circle-o-notch fa-spin"></i> Saving..
              </span>
              <span ng-if="!vm.loading">Save</span>
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
